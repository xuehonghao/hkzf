(this.webpackJsonphkzf=this.webpackJsonphkzf||[]).push([[23],{37:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(50);var a=n(51),r=n.n(a),c=n(66),i=n.n(c),s=n(39),u="https://api-haoke-web.itheima.net",o=i.a.create({baseURL:u});o.interceptors.request.use((function(e){var t=e.url,n=e.headers;return t.startsWith("/user")&&!["/user/registered","/user/login"].includes(t)&&(n.authorization=Object(s.b)()),r.a.loading("\u52a0\u8f7d\u4e2d...",0),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){var t={status:e.data.status,description:e.data.description,data:e.data.body};return r.a.hide(),t}),(function(e){return Promise.reject(e)})),t.b=o},384:function(e,t,n){},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return l}));var a=n(42),r=n.n(a),c=n(43),i=n(41),s=function(e){localStorage.setItem("token",e)},u=function(){return localStorage.getItem("token")},o=function(){localStorage.removeItem("token")},l=function(){return!!u()},m=function(e){sessionStorage.setItem("currCity",JSON.stringify(e))},f=function(){var e=sessionStorage.getItem("currCity");return e?JSON.parse(e):null},p=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f(),e.next=3,new Promise((function(e,t){(new window.BMap.LocalCity).get((function(t){e(t.name)}))}));case 3:if(n=e.sent,t){e.next=8;break}return e.abrupt("return",new Promise(function(){var e=Object(c.a)(r.a.mark((function e(t,a){var c,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.b)(n);case 2:c=e.sent,s=c.status,u=c.data,200===s?(m(u),t(u)):a("error");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 8:return e.abrupt("return",Promise.resolve(t));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},404:function(e,t,n){"use strict";n.r(t);n(171);var a=n(173),r=n.n(a),c=(n(149),n(151)),i=n.n(c),s=(n(176),n(178)),u=n.n(s),o=(n(62),n(63)),l=n.n(o),m=(n(114),n(115)),f=n.n(m),p=n(42),d=n.n(p),h=n(402),g=n(43),v=n(45),w=n(46),y=n(48),E=n(47),b=n(0),N=n.n(b),k=(n(384),n(37)),j=function(){return k.b.get("/home/swiper")},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"AREA|88cff55c-aaa4-e2e0";return k.b.get("/home/groups",{params:{area:e}})},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"AREA|88cff55c-aaa4-e2e0";return k.b.get("/home/news",{params:{area:e}})},O=n(39),x=n(193),I=function(e){Object(y.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={swipers:[],groups:[],news:[],currCity:{},keyword:"",imgHeight:176,autoplay:!1},e.loadDatas=Object(g.a)(d.a.mark((function t(){var n,a,r,c,i,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[j(),S(),C()],t.next=3,Promise.all(n);case 3:a=t.sent,r=Object(h.a)(a,3),c=r[0],i=r[1],s=r[2],e.setState({swipers:c.data,groups:i.data,news:s.data},(function(){e.setState({autoplay:!0})}));case 9:case"end":return t.stop()}}),t)}))),e.getCurrCity=Object(g.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.a)();case 2:n=t.sent,e.setState({currCity:n});case 4:case"end":return t.stop()}}),t)}))),e.renderSwiper=function(){return N.a.createElement(f.a,{className:"swiper",autoplay:e.state.autoplay,infinite:!0},e.state.swipers.map((function(t){return N.a.createElement("a",{key:new Date,href:"http://www.itheima.com",style:{display:"inline-block",width:"100%",height:e.state.imgHeight}},N.a.createElement("img",{src:"".concat(k.a).concat(t.imgSrc),alt:"",onLoad:function(){window.dispatchEvent(new Event("resize")),e.setState({imgHeight:"auto"})}}))})))},e.renderNav=function(){return N.a.createElement(l.a,{className:"nav"},x.a.map((function(t){return N.a.createElement(l.a.Item,{onClick:function(){return e.props.history.push(t.path)},key:t.id},N.a.createElement("img",{src:t.img,alt:""}),N.a.createElement("p",null,t.title))})))},e.renderGroup=function(){return N.a.createElement("div",{className:"group"},N.a.createElement(l.a,{className:"group-title",justify:"between"},N.a.createElement("h3",null,"\u79df\u623f\u5c0f\u7ec4"),N.a.createElement("span",null,"\u66f4\u591a")),N.a.createElement(u.a,{data:e.state.groups,columnNum:2,square:!1,hasLine:!1,renderItem:function(e){return N.a.createElement(l.a,{className:"grid-item",justify:"between"},N.a.createElement("div",{className:"desc"},N.a.createElement("h3",null,e.title),N.a.createElement("p",null,e.desc)),N.a.createElement("img",{src:"".concat(k.a).concat(e.imgSrc),alt:""}))}}))},e.renderInfo=function(){return N.a.createElement("div",{className:"news"},N.a.createElement("h3",{className:"group-title"},"\u6700\u65b0\u8d44\u8baf"),N.a.createElement(i.a,{size:"md"},e.state.news.map((function(e){return N.a.createElement("div",{className:"news-item",key:e.id},N.a.createElement("div",{className:"imgwrap"},N.a.createElement("img",{className:"img",src:"".concat(k.a).concat(e.imgSrc),alt:""})),N.a.createElement(l.a,{className:"content",direction:"column",justify:"between"},N.a.createElement("h3",{className:"title"},e.title),N.a.createElement(l.a,{className:"info",justify:"between"},N.a.createElement("span",null,e.from),N.a.createElement("span",null,e.date))))}))))},e.renderTopNav=function(){return N.a.createElement(l.a,{justify:"around",className:"topNav"},N.a.createElement("div",{className:"searchBox"},N.a.createElement("div",{className:"city",onClick:function(){return e.props.history.push("/cityList")}},e.state.currCity.label,N.a.createElement("i",{className:"iconfont icon-arrow"})),N.a.createElement(r.a,{value:e.state.keyword,onChange:function(t){return e.setState({keyword:t})},placeholder:"\u8bf7\u8f93\u5165\u5c0f\u533a\u6216\u5730\u5740"})),N.a.createElement("div",{className:"map"},N.a.createElement("i",{key:"0",className:"iconfont icon-map"})))},e}return Object(w.a)(n,[{key:"componentDidMount",value:function(){this.loadDatas(),this.getCurrCity()}},{key:"render",value:function(){return N.a.createElement(N.a.Fragment,null,this.renderSwiper(),this.renderNav(),this.renderGroup(),this.renderInfo(),this.renderTopNav())}}]),n}(b.Component);t.default=I},41:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return u}));var a=n(37),r=function(e){return a.b.get("/area/info",{params:{name:e}})},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a.b.get("/area/city",{params:{level:e}})},i=function(){return a.b.get("/area/hot")},s=function(e,t){return a.b.get("/area/community",{params:{name:e,id:t}})},u=function(e){return a.b.get("/area/map",{params:{id:e}})}}}]);
//# sourceMappingURL=23.314ee0d9.chunk.js.map