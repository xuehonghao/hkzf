(this.webpackJsonphkzf=this.webpackJsonphkzf||[]).push([[18],{112:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Object.keys(t).reduce((function(e,n){return"aria-"!==n.substr(0,5)&&"data-"!==n.substr(0,5)&&"role"!==n||(e[n]=t[n]),e}),{})},t.exports=e.default},171:function(t,e,n){"use strict";n(38),n(172)},172:function(t,e,n){},173:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=g(n(35)),r=g(n(44)),o=g(n(31)),i=g(n(32)),u=g(n(33)),s=g(n(34)),c=g(n(36)),l=v(n(0)),f=v(n(7)),h=g(n(55)),p=g(n(112)),d=n(91),m=n(174);function v(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t){(0,o.default)(this,e);var n=(0,u.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.onSubmit=function(t){t.preventDefault(),n.props.onSubmit&&n.props.onSubmit(n.state.value||""),n.inputRef&&n.inputRef.blur()},n.onChange=function(t){n.state.focus||n.setState({focus:!0});var e=t.target.value;"value"in n.props||n.setState({value:e}),n.props.onChange&&n.props.onChange(e)},n.onFocus=function(){n.setState({focus:!0}),n.firstFocus=!0,n.props.onFocus&&n.props.onFocus()},n.onBlur=function(){var t;n.onBlurTimeout=(t=function(){n.blurFromOnClear||document.activeElement!==n.inputRef&&n.setState({focus:!1}),n.blurFromOnClear=!1},window.requestAnimationFrame?window.requestAnimationFrame(t):window.setTimeout(t,1)),n.props.onBlur&&(setTimeout((function(){document.body&&(document.body.scrollTop=document.body.scrollTop)}),100),n.props.onBlur())},n.onClear=function(){n.doClear()},n.doClear=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.blurFromOnClear=t,"value"in n.props||n.setState({value:""}),n.props.onClear&&n.props.onClear(""),n.props.onChange&&n.props.onChange(""),t&&n.focus()},n.onCancel=function(){n.props.onCancel?n.props.onCancel(n.state.value||""):n.doClear(!1)},n.focus=function(){n.inputRef&&n.inputRef.focus()};var a=void 0;return a="value"in t?t.value||"":"defaultValue"in t?t.defaultValue:"",n.state={value:a,focus:!1},n}return(0,s.default)(e,t),(0,i.default)(e,[{key:"componentDidMount",value:function(){if(this.rightBtnRef){var t=window.getComputedStyle(this.rightBtnRef);this.rightBtnInitMarginleft=t.marginLeft}this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){if(this.syntheticPhRef)if(this.inputContainerRef&&this.inputContainerRef.className.indexOf(this.props.prefixCls+"-start")>-1){if(this.syntheticPhContainerRef){var t=this.syntheticPhContainerRef.getBoundingClientRect().width;this.syntheticPhRef.style.width=Math.ceil(t)+"px"}!this.props.showCancelButton&&this.rightBtnRef&&(this.rightBtnRef.style.marginRight="0")}else this.syntheticPhRef.style.width="100%",!this.props.showCancelButton&&this.rightBtnRef&&(this.rightBtnRef.style.marginRight="-"+(this.rightBtnRef.offsetWidth+(null!=this.rightBtnInitMarginleft?parseInt(this.rightBtnInitMarginleft,10):0))+"px")}},{key:"componentWillReceiveProps",value:function(t){"value"in t&&t.value!==this.state.value&&this.setState({value:t.value})}},{key:"componentWillUnmount",value:function(){var t;this.onBlurTimeout&&(t=this.onBlurTimeout,window.cancelAnimationFrame?window.cancelAnimationFrame(t):window.clearTimeout(t),this.onBlurTimeout=null)}},{key:"render",value:function(){var t,e=this,o=this.props,i=o.prefixCls,u=o.showCancelButton,s=o.disabled,f=o.placeholder,m=o.className,v=o.style,g=o.maxLength,y=(0,d.getComponentLocale)(this.props,this.context,"SearchBar",(function(){return n(175)})).cancelText,b=this.state,C=b.value,w=b.focus,_=(0,c.default)(i,m,(0,r.default)({},i+"-start",!!(w||C&&C.length>0))),S=(0,c.default)(i+"-clear",(0,r.default)({},i+"-clear-show",!!(w&&C&&C.length>0))),T=(0,c.default)(i+"-cancel",(t={},(0,r.default)(t,i+"-cancel-show",!!(u||w||C&&C.length>0)),(0,r.default)(t,i+"-cancel-anim",this.firstFocus),t));return l.createElement("form",{onSubmit:this.onSubmit,className:_,style:v,ref:function(t){return e.inputContainerRef=t},action:"#"},l.createElement("div",{className:i+"-input"},l.createElement("div",{className:i+"-synthetic-ph",ref:function(t){return e.syntheticPhRef=t}},l.createElement("span",{className:i+"-synthetic-ph-container",ref:function(t){return e.syntheticPhContainerRef=t}},l.createElement("i",{className:i+"-synthetic-ph-icon"}),l.createElement("span",{className:i+"-synthetic-ph-placeholder",style:{visibility:f&&!C?"visible":"hidden"}},f))),l.createElement("input",(0,a.default)({type:"search",className:i+"-value",value:C,disabled:s,placeholder:f,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,ref:function(t){return e.inputRef=t},maxLength:g},(0,p.default)(this.props))),l.createElement(h.default,{activeClassName:i+"-clear-active"},l.createElement("a",{onClick:this.onClear,className:S}))),l.createElement("div",{className:T,onClick:this.onCancel,ref:function(t){return e.rightBtnRef=t}},this.props.cancelText||y))}}]),e}(l.Component);e.default=y,y.defaultProps=m.defaultProps,y.contextTypes={antLocale:f.object},t.exports=e.default},174:function(t,e,n){"use strict";function a(){}Object.defineProperty(e,"__esModule",{value:!0});e.defaultProps={prefixCls:"am-search",placeholder:"",onSubmit:a,onChange:a,onFocus:a,onBlur:a,onClear:a,showCancelButton:!1,disabled:!1}},175:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={cancelText:"\u53d6\u6d88"},t.exports=e.default},37:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n(50);var a=n(51),r=n.n(a),o=n(66),i=n.n(o),u=n(39),s="https://api-haoke-web.itheima.net",c=i.a.create({baseURL:s});c.interceptors.request.use((function(t){var e=t.url,n=t.headers;return e.startsWith("/user")&&!["/user/registered","/user/login"].includes(e)&&(n.authorization=Object(u.b)()),r.a.loading("\u52a0\u8f7d\u4e2d...",0),t}),(function(t){return Promise.reject(t)})),c.interceptors.response.use((function(t){var e={status:t.data.status,description:t.data.description,data:t.data.body};return r.a.hide(),e}),(function(t){return Promise.reject(t)})),e.b=c},383:function(t,e,n){t.exports={root:"Search_root__1RO5f",list:"Search_list__2aU3H",noHistory:"Search_noHistory__1jsXM",tips:"Search_tips__1_3KG",tip:"Search_tip__V0T8K"}},39:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return u})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return l}));var a=n(42),r=n.n(a),o=n(43),i=n(41),u=function(t){localStorage.setItem("token",t)},s=function(){return localStorage.getItem("token")},c=function(){localStorage.removeItem("token")},l=function(){return!!s()},f=function(t){sessionStorage.setItem("currCity",JSON.stringify(t))},h=function(){var t=sessionStorage.getItem("currCity");return t?JSON.parse(t):null},p=function(){var t=Object(o.a)(r.a.mark((function t(){var e,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h(),t.next=3,new Promise((function(t,e){(new window.BMap.LocalCity).get((function(e){t(e.name)}))}));case 3:if(n=t.sent,e){t.next=8;break}return t.abrupt("return",new Promise(function(){var t=Object(o.a)(r.a.mark((function t(e,a){var o,u,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.b)(n);case 2:o=t.sent,u=o.status,s=o.data,200===u?(f(s),e(s)):a("error");case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 8:return t.abrupt("return",Promise.resolve(e));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},41:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return s}));var a=n(37),r=function(t){return a.b.get("/area/info",{params:{name:t}})},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a.b.get("/area/city",{params:{level:t}})},i=function(){return a.b.get("/area/hot")},u=function(t,e){return a.b.get("/area/community",{params:{name:t,id:e}})},s=function(t){return a.b.get("/area/map",{params:{id:t}})}},412:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return y}));n(171);var a=n(173),r=n.n(a),o=n(42),i=n.n(o),u=n(43),s=n(45),c=n(46),l=n(48),f=n(47),h=n(0),p=n.n(h),d=n(39),m=n(383),v=n.n(m),g=n(41),y=function(t){Object(l.a)(n,t);var e=Object(f.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={searchTxt:"",tipsList:[]},t.renderTips=function(){return t.state.tipsList.map((function(e){return p.a.createElement("li",{key:e.community,className:v.a.tip,onClick:function(){t.props.history.replace({pathname:"/rent/add",id:e.community,name:e.communityName,data:t.props.location.data})}},e.communityName)}))},t.handlerSearch=function(e){var n=e.trim();if(0===n.length)return t.setState({searchTxt:""});t.setState({searchTxt:n},Object(u.a)(i.a.mark((function e(){var a,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.c)(n,t.cityId);case 2:a=e.sent,r=a.status,o=a.data,200===r&&t.setState({tipsList:o});case 6:case"end":return e.stop()}}),e)}))))},t}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=Object(u.a)(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("===================================="),console.log(this.props),console.log("===================================="),t.next=5,Object(d.a)();case 5:e=t.sent,n=e.value,this.cityId=n;case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state.searchTxt;return p.a.createElement("div",{className:v.a.root},p.a.createElement(r.a,{placeholder:"\u8bf7\u8f93\u5165\u5c0f\u533a\u6216\u5730\u5740",value:e,showCancelButton:!0,onChange:this.handlerSearch,onCancel:function(){return t.props.history.replace({pathname:"/rent/add",data:t.props.location.data})}}),p.a.createElement("ul",{className:v.a.tips},this.renderTips()))}}]),n}(h.Component)},55:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return y}));var a=n(35),r=n.n(a),o=n(31),i=n.n(o),u=n(32),s=n.n(u),c=n(33),l=n.n(c),f=n(34),h=n.n(f),p=n(0),d=n.n(p),m=n(36),v=n.n(m),g=function(t){function e(){i()(this,e);var t=l()(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return t.state={active:!1},t.onTouchStart=function(e){t.triggerEvent("TouchStart",!0,e)},t.onTouchMove=function(e){t.triggerEvent("TouchMove",!1,e)},t.onTouchEnd=function(e){t.triggerEvent("TouchEnd",!1,e)},t.onTouchCancel=function(e){t.triggerEvent("TouchCancel",!1,e)},t.onMouseDown=function(e){t.triggerEvent("MouseDown",!0,e)},t.onMouseUp=function(e){t.triggerEvent("MouseUp",!1,e)},t.onMouseLeave=function(e){t.triggerEvent("MouseLeave",!1,e)},t}return h()(e,t),s()(e,[{key:"componentDidUpdate",value:function(){this.props.disabled&&this.state.active&&this.setState({active:!1})}},{key:"triggerEvent",value:function(t,e,n){var a="on"+t,r=this.props.children;r.props[a]&&r.props[a](n),e!==this.state.active&&this.setState({active:e})}},{key:"render",value:function(){var t=this.props,e=t.children,n=t.disabled,a=t.activeClassName,o=t.activeStyle,i=n?void 0:{onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchCancel,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave},u=d.a.Children.only(e);if(!n&&this.state.active){var s=u.props,c=s.style,l=s.className;return!1!==o&&(o&&(c=r()({},c,o)),l=v()(l,a)),d.a.cloneElement(u,r()({className:l,style:c},i))}return d.a.cloneElement(u,i)}}]),e}(d.a.Component),y=g;g.defaultProps={disabled:!1}},91:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,r=n(35),o=(a=r)&&a.__esModule?a:{default:a};e.getComponentLocale=function(t,e,n,a){var r={};if(e&&e.antLocale&&e.antLocale[n])r=e.antLocale[n];else{var i=a();r=i.default||i}var u=(0,o.default)({},r);t.locale&&(u=(0,o.default)({},u,t.locale),t.locale.lang&&(u.lang=(0,o.default)({},r.lang,t.locale.lang)));return u},e.getLocaleCode=function(t){var e=t.antLocale&&t.antLocale.locale;if(t.antLocale&&t.antLocale.exist&&!e)return"zh-cn";return e}}}]);
//# sourceMappingURL=18.6f0fb41a.chunk.js.map