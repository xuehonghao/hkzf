(this.webpackJsonphkzf=this.webpackJsonphkzf||[]).push([[22],{37:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(50);var r=n(51),a=n.n(r),o=n(66),i=n.n(o),c=n(39),u="https://api-haoke-web.itheima.net",s=i.a.create({baseURL:u});s.interceptors.request.use((function(e){var t=e.url,n=e.headers;return t.startsWith("/user")&&!["/user/registered","/user/login"].includes(t)&&(n.authorization=Object(c.b)()),a.a.loading("\u52a0\u8f7d\u4e2d...",0),e}),(function(e){return Promise.reject(e)})),s.interceptors.response.use((function(e){var t={status:e.data.status,description:e.data.description,data:e.data.body};return a.a.hide(),t}),(function(e){return Promise.reject(e)})),t.b=s},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return f}));var r=n(42),a=n.n(r),o=n(43),i=n(41),c=function(e){localStorage.setItem("token",e)},u=function(){return localStorage.getItem("token")},s=function(){localStorage.removeItem("token")},f=function(){return!!u()},l=function(e){sessionStorage.setItem("currCity",JSON.stringify(e))},m=function(){var e=sessionStorage.getItem("currCity");return e?JSON.parse(e):null},d=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m(),e.next=3,new Promise((function(e,t){(new window.BMap.LocalCity).get((function(t){e(t.name)}))}));case 3:if(n=e.sent,t){e.next=8;break}return e.abrupt("return",new Promise(function(){var e=Object(o.a)(a.a.mark((function e(t,r){var o,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.b)(n);case 2:o=e.sent,c=o.status,u=o.data,200===c?(l(u),t(u)):r("error");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 8:return e.abrupt("return",Promise.resolve(t));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},392:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return L}));n(176);var r=n(178),a=n.n(r),o=(n(393),n(395)),i=n.n(o),c=n(42),u=n.n(c),s=(n(50),n(51)),f=n.n(s),l=n(43),m=n(45),d=n(46),p=n(48),v=n(47),b=(n(144),n(145)),g=n.n(b),h=n(0),_=n.n(h),E=n(12),y=n(37),w=n(396),k=n.n(w),N=n(39),I=n(70),j=[{id:1,name:"\u6211\u7684\u6536\u85cf",iconfont:"icon-coll",to:"/favorate"},{id:2,name:"\u6211\u7684\u51fa\u79df",iconfont:"icon-ind",to:"/rent"},{id:3,name:"\u770b\u623f\u8bb0\u5f55",iconfont:"icon-record"},{id:4,name:"\u6210\u4e3a\u623f\u4e3b",iconfont:"icon-identity"},{id:5,name:"\u4e2a\u4eba\u8d44\u6599",iconfont:"icon-myinfo"},{id:6,name:"\u8054\u7cfb\u6211\u4eec",iconfont:"icon-cust"}],O=y.a+"/img/profile/avatar.png",x=g.a.alert,L=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isLogin:Object(N.c)(),userInfo:{}},e.getUserInfo=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.isLogin){t.next=7;break}return t.next=4,Object(I.e)();case 4:n=t.sent,console.log(n),200===n.status?(n.data.avatar=y.a+n.data.avatar,e.setState({userInfo:n.data})):(e.setState({isLogin:!1}),f.a.info(n.description));case 7:case"end":return t.stop()}}),t)}))),e.logout=function(){x("\u63d0\u793a","\u786e\u5b9a\u9000\u51fa\u5417\uff1f",[{text:"\u53d6\u6d88"},{text:"\u786e\u5b9a",onPress:function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(I.g)();case 2:n=t.sent,console.log(n),200===n.status?(Object(N.d)(),e.setState({isLogin:!1,userInfo:{}})):f.a.info(n.description);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}])},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"renderUser",value:function(){var e=this.props,t=e.history,n=e.location,r=this.state.userInfo,a=r.nickname,o=r.avatar;return _.a.createElement("div",{className:k.a.title},_.a.createElement("img",{className:k.a.bg,src:y.a+"/img/profile/bg.png",alt:"\u80cc\u666f\u56fe"}),_.a.createElement("div",{className:k.a.info},_.a.createElement("div",{className:k.a.myIcon},_.a.createElement("img",{className:k.a.avatar,src:o||O,alt:"icon"})),_.a.createElement("div",{className:k.a.user},_.a.createElement("div",{className:k.a.name},a||"\u6e38\u5ba2"),this.state.isLogin?_.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:k.a.auth},_.a.createElement("span",{onClick:this.logout},"\u9000\u51fa")),_.a.createElement("div",{className:k.a.edit},"\u7f16\u8f91\u4e2a\u4eba\u8d44\u6599",_.a.createElement("span",{className:k.a.arrow},_.a.createElement("i",{className:"iconfont icon-arrow"})))):_.a.createElement("div",{className:k.a.edit},_.a.createElement(i.a,{type:"primary",size:"small",inline:!0,onClick:function(){return t.push({pathname:"/login",backUrl:n.pathname})}},"\u53bb\u767b\u5f55")))))}},{key:"render",value:function(){return _.a.createElement("div",{className:k.a.root},this.renderUser(),_.a.createElement(a.a,{data:j,columnNum:3,hasLine:!1,renderItem:function(e){return e.to?_.a.createElement(E.b,{to:e.to},_.a.createElement("div",{className:k.a.menuItem},_.a.createElement("i",{className:"iconfont ".concat(e.iconfont)}),_.a.createElement("span",null,e.name))):_.a.createElement("div",{className:k.a.menuItem},_.a.createElement("i",{className:"iconfont ".concat(e.iconfont)}),_.a.createElement("span",null,e.name))}}),_.a.createElement("div",{className:k.a.ad},_.a.createElement("img",{src:y.a+"/img/profile/join.png",alt:""})))}}]),n}(h.Component)},396:function(e,t,n){e.exports={root:"profile_root__1CnB4",title:"profile_title__29pUq",bg:"profile_bg__1Lcax",info:"profile_info__1cIYU",auth:"profile_auth__1XLSo",user:"profile_user__HV1sY",myIcon:"profile_myIcon__2XBnO",avatar:"profile_avatar__jbVzv",name:"profile_name__3qC8A",edit:"profile_edit__3344L",arrow:"profile_arrow__izVhY",ad:"profile_ad__34yGn",menuItem:"profile_menuItem__1bizb"}},41:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return u}));var r=n(37),a=function(e){return r.b.get("/area/info",{params:{name:e}})},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return r.b.get("/area/city",{params:{level:e}})},i=function(){return r.b.get("/area/hot")},c=function(e,t){return r.b.get("/area/community",{params:{name:e,id:t}})},u=function(e){return r.b.get("/area/map",{params:{id:e}})}},70:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return l})),n.d(t,"h",(function(){return m}));var r=n(54),a=n(37),o=function(e,t){return a.b.post("/user/login",{username:e,password:t})},i=function(){return a.b.get("/user")},c=function(){return a.b.post("/user/logout")},u=function(e){return a.b.get("/user/favorites/".concat(e))},s=function(e){return a.b.delete("/user/favorites/".concat(e))},f=function(e){return a.b.post("/user/favorites/".concat(e))},l=function(){return a.b.get("/user/houses")},m=function(e){return a.b.post("/user/houses",Object(r.a)({},e))}}}]);
//# sourceMappingURL=22.09215b59.chunk.js.map